{% extends "base_page.html" %}
{% block title %}{{title}}{% endblock %}

{% block head %}
{{ super() }}
    <style type="text/css">
        .parent {
            width: 400px;
            height: 400px;
            border: 1px solid red;
        }

        .children1 {
            border: 2px solid #99CCCC;
            display: inline-block;
            display: inline;
            zoom: 1;
            padding-top: 2px;
            padding-left: 2px;
            margin-right: 4px;
            margin-bottom: 6px;
        }

        .children2 {
            border: 2px solid #FF9966;
            display: inline-block;
            display: inline;
            zoom: 1;
            margin-right: 4px;
            margin-bottom: 4px;
        }
    </style>
{% endblock %}


{% block content %}
<div class="page-breadcrumb">
            <div class="row">
                <div class="col-12 d-flex no-block align-items-center">
                    <h4 class="page-title">数据查看器</h4>
                    <div class="ml-auto text-right">
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="#">Home</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Library</li>
                            </ol>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-6">
                                    <h5 class="card-title">数据选择</h5>

                                    <div class="form-group row">
                                        <label class="col-sm-3 text-right control-label col-form-label">文本段落来源:</label>
                                        <div class="col-sm-8">
                                            <input id='paragraph_source' type="text" class="form-control" value='tabl1|col1'/>
                                        </div>
                                    </div>
  <div class="form-group row">
  <label class="col-sm-3 text-right control-label col-form-label">文本段落值:</label>
  <div class="col-sm-8">
  <textarea id='paragraph_source_value' width="100%" style="width:100%;height: 200px" > </textarea>
  </div>
  </div>
                                    <div class="form-group row">
                                        <label class="col-sm-3 text-right control-label col-form-label">抽象时间来源:</label>
                                        <div class="col-sm-8">
                                          <input id='abstract_source' type="text" class="form-control" value='tabl1|col2'> </input>
                                        </div>
                                    </div>
  <div class="form-group row">
  <label class="col-sm-3 text-right control-label col-form-label">抽象时间值:</label>
  <div class="col-sm-8">
  <input id='abstract_source_value' type="text" class="form-control" value='2021-02-22'> </input>
  </div>
  </div>
                                </div>
                                <div class="col-6">
                                    <h5 class="card-title">解析条件</h5>
                                    <div class="row">
                                        <div class="col-3">
                                            <label>手动配置还是来自JSON:</label>
                                        </div>
                                        <div class="col-9">
                                            <div class="form-group row">
                                                <div class="custom-control custom-radio">
                                                    <input type="radio" class="custom-control-input"
                                                           id="customControlValidation22"
                                                           name="choose_param_type" checked
                                                           value='hand'
                                                           onclick="$('#by_hand').show();$('#by_json').hide()">
                                                    <label class="custom-control-label"
                                                           for="customControlValidation22">手动</label>
                                                </div>
                                                <div class="custom-control custom-radio">
                                                    <input type="radio" class="custom-control-input"
                                                           id="customControlValidation23"
                                                           name="choose_param_type"
                                                           value='json'
                                                           onclick="$('#by_hand').hide();$('#by_json').show()">
                                                    <label class="custom-control-label"
                                                           for="customControlValidation23">JSON</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id='by_hand'>
                                        <div class="row">
                                            <div class="col-2">
                                                <label>段落标准化:</label>
                                            </div>
                                            <div class="col-10">
                                                <div class="form-group row">
                                                    <label class="col-md-5">是否切分引号括号里面的分隔符:</label>
                                                    <div class="col-md-7">
                                                        <div class="custom-control custom-radio">
                                                            <input type="radio" class="custom-control-input"
                                                                   id="customControlValidation7"
                                                                   name="ignore_inner_punctuation"
                                                                   value="true" checked required>
                                                            <label class="custom-control-label"
                                                                   for="customControlValidation7">是</label>
                                                        </div>
                                                        <div class="custom-control custom-radio">
                                                            <input type="radio" class="custom-control-input"
                                                                   id="customControlValidation8"
                                                                   name="ignore_inner_punctuation"
                                                                   value="false" required>
                                                            <label class="custom-control-label"
                                                                   for="customControlValidation8">否</label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-md-5">是否获得更好的时间提取文本:</label>
                                                    <div class="col-md-7">
                                                        <div class="custom-control custom-radio">
                                                            <input type="radio" class="custom-control-input"
                                                                   id="customControlValidation15"
                                                                   name="get_more_time_get_paragraph"
                                                                   value="true" required>
                                                            <label class="custom-control-label"
                                                                   for="customControlValidation15">是</label>
                                                        </div>
                                                        <div class="custom-control custom-radio">
                                                            <input type="radio" class="custom-control-input"
                                                                   id="customControlValidation16"
                                                                   name="get_more_time_get_paragraph"
                                                                   value="false" checked required>
                                                            <label class="custom-control-label"
                                                                   for="customControlValidation16">否</label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-md-5">是否将 。"。)替换为"。)。:</label>
                                                    <div class="col-md-7">
                                                        <div class="custom-control custom-radio">
                                                            <input type="radio" class="custom-control-input"
                                                                   id="customControlValidation20"
                                                                   name="replace_last_inner_punctuation_to_out"
                                                                   value="true" required>
                                                            <label class="custom-control-label"
                                                                   for="customControlValidation20">是</label>
                                                        </div>
                                                        <div class="custom-control custom-radio">
                                                            <input type="radio" class="custom-control-input"
                                                                   id="customControlValidation21"
                                                                   name="replace_last_inner_punctuation_to_out"
                                                                   value="false" checked required>
                                                            <label class="custom-control-label"
                                                                   for="customControlValidation21">否</label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-2">
                                                <label>段落切分:</label>
                                            </div>
                                            <div class="col-10">
                                                <div class="form-group row">
                                                    <label class="col-sm-3 control-label col-form-label">整句分割正则:</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" class="form-control"
                                                               id="whole_sentence_split_reg"
                                                               placeholder="请输入整句分割正则" value = '[。]'>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-sm-3 control-label col-form-label">短句分割正则:</label>
                                                    <div class="col-sm-9">
                                                        <input type="text" class="form-control"
                                                               id="short_sentence_split_reg"
                                                               placeholder="请输入短句分割正则"
  value='[,，]'>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-sm-3 control-label col-form-label">是否提取时间:</label>
                                                    <div class="col-sm-9">
                                                        <div class="custom-control custom-radio">
                                                            <input type="radio" class="custom-control-input"
                                                                   id="customControlValidation17"
                                                                   name="get_sentence_time"
                                                                   value="true"
                                                                   onclick="$('#time_function').show()">
                                                            <label class="custom-control-label"
                                                                   for="customControlValidation17">是</label>
                                                        </div>
                                                        <div class="custom-control custom-radio">
                                                            <input type="radio" class="custom-control-input"
                                                                   id="customControlValidation18"
                                                                   name="get_sentence_time"
                                                                   value="false" checked
                                                                   onclick="$('#time_function').hide()">
                                                            <label class="custom-control-label"
                                                                   for="customControlValidation18">否</label>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>

                                        <div class="row" id="time_function" style="display:none">
                                            <div class="col-2">
                                                <label>段落时间提取:</label>
                                            </div>
                                            <div class="col-10">
                                                <div class="form-group row">
                                                    <label class="col-sm-5 control-label col-form-label">是否为短句切分时间顿号时间:</label>
                                                    <div class="col-sm-7">
                                                        <div class="custom-control custom-radio">
                                                            <input type="radio" class="custom-control-input"
                                                                   id="customControlValidation13"
                                                                   name="spilt_short_by_time_and_comma"
                                                                   value="true" required>
                                                            <label class="custom-control-label"
                                                                   for="customControlValidation13">是</label>
                                                        </div>
                                                        <div class="custom-control custom-radio">
                                                            <input type="radio" class="custom-control-input"
                                                                   id="customControlValidation14"
                                                                   name="spilt_short_by_time_and_comma"
                                                                   value="false" checked required>
                                                            <label class="custom-control-label"
                                                                   for="customControlValidation14">否</label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-md-5">整句是否取最后一个时间:</label>
                                                    <div class="col-md-7">
                                                        <div class="custom-control custom-radio">
                                                            <input type="radio" class="custom-control-input"
                                                                   id="customControlValidation1"
                                                                   name="whole_get_last_time"
                                                                   value="true" required>

                                                            <label class="custom-control-label"
                                                                   for="customControlValidation1">是</label>
                                                        </div>
                                                        <div class="custom-control custom-radio">
                                                            <input type="radio" class="custom-control-input"
                                                                   id="customControlValidation2"
                                                                   name="whole_get_last_time"
                                                                   value="false" checked required>
                                                            <label class="custom-control-label"
                                                                   for="customControlValidation2">否</label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-md-5">短句是否取最后一个时间:</label>
                                                    <div class="col-md-7">
                                                        <div class="custom-control custom-radio">
                                                            <input type="radio" class="custom-control-input"
                                                                   id="customControlValidation3"
                                                                   name="short_get_last_time"
                                                                   value="true" required>
                                                            <label class="custom-control-label"
                                                                   for="customControlValidation3">是</label>
                                                        </div>
                                                        <div class="custom-control custom-radio">
                                                            <input type="radio" class="custom-control-input"
                                                                   id="customControlValidation4"
                                                                   name="short_get_last_time"
                                                                   value="false" checked required>
                                                            <label class="custom-control-label"
                                                                   for="customControlValidation4">否</label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-sm-4  control-label col-form-label">不提取时间的短句正则:</label>
                                                    <div class="col-sm-8">
                                                        <input type="text" class="form-control"
                                                               id="short_time_filter_pattern"
                                                               placeholder="请输入不提取时间的短句正则">
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label class="col-sm-5 control-label col-form-label">是否忽略[括号][引号]里的时间:</label>
                                                    <div class="col-sm-7">
                                                        <div class="custom-control custom-radio">
                                                            <input type="radio" class="custom-control-input"
                                                                   id="customControlValidation9"
                                                                   name="get_time_ignore_bracket_and_other"
                                                                   value="true" required>
                                                            <label class="custom-control-label"
                                                                   for="customControlValidation9">是</label>
                                                        </div>
                                                        <div class="custom-control custom-radio">
                                                            <input type="radio" class="custom-control-input"
                                                                   id="customControlValidation10"
                                                                   name="get_time_ignore_bracket_and_other"
                                                                   value="false" checked required>
                                                            <label class="custom-control-label"
                                                                   for="customControlValidation10">否</label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <div class="col-3">
                                                        <label>短句时间继承规则:</label>
                                                    </div>
                                                    <div class="col-9">
                                                        <div class="form-group row">
                                                            <label class="col-sm-5 control-label col-form-label">能够继承的整句范围:</label>
                                                            <div class="col-sm-7">
                                                                <input type="text" class="form-control"
                                                                       id="prefix_whole_num"
                                                                       placeholder="请输入取时间的短句正则">
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label class="col-sm-5 control-label col-form-label">能够继承的短句范围:</label>
                                                            <div class="col-sm-7">
                                                                <input type="text" class="form-control"
                                                                       id="prefix_short_num"
                                                                       placeholder="请输入能够继承的短句范围">
                                                            </div>
                                                        </div>
                                                        <div class="form-group row">
                                                            <label class="col-sm-5 control-label col-form-label">是否仅提取有的时间:</label>
                                                            <div class="col-sm-7">
                                                                <div class="custom-control custom-radio">
                                                                    <input type="radio" class="custom-control-input"
                                                                           id="customControlValidation5"
                                                                           name="get_useful"
                                                                           value="true" checked required>
                                                                    <label class="custom-control-label"
                                                                           for="customControlValidation5">是</label>
                                                                </div>
                                                                <div class="custom-control custom-radio">
                                                                    <input type="radio" class="custom-control-input"
                                                                           id="customControlValidation6"
                                                                           name="get_useful"
                                                                           value="false" required>
                                                                    <label class="custom-control-label"
                                                                           for="customControlValidation6">否</label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="by_json">
                                        <textarea id="json_text_area" width="100%" style="width:100%;height: 200px"></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="border-top">
                                <div class="card-body">
                                    <button type="button" class="btn btn-success" onclick="find_result(this)">解析
                                    </button>
                                    <button type="button" class="btn btn-skype" onclick="process_param()">生成配置参数
                                    </button>
                                    <button type="button" class="btn btn-secondary"
                                            onclick="$(this).parent().parent().prev().toggle()">收起/展开
                                    </button>
                                    {#                                    <button type="button" class="btn btn-info" onclick="edit_query()">编辑</button>#}
                                    {#                                    <button type="button" class="btn btn-danger" onclick="delete_query()">删除</button>#}
                                    {#                                    <button type="button" class="btn btn-secondary" onclick="restore_query()">恢复#}
                                    {#                                    </button>#}
                                    {#                                    <button type="button" class="btn btn-info" id="download_button"#}
                                    {#                                            onclick="download_config_json()">导出配置#}
                                    {#                                    </button>#}
                                    {#                                    <button type="button" class="btn btn-info" onclick="upload_config()">上传配置文件#}
                                    {#                                    </button>#}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">原始文本:</h5>
                            <div id='origin_text'></div>
                            <h5 class="card-title">抽象时间:</h5>
                            <div id='abstract_time'></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">结构化结果</h5>
                            <div id='json_renderer'></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">配置参数:</h5>
                            <div id='param'></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
{% endblock %}
{% block script %}
<script src="/static/js/tools_box/data_viewer.js"></script>
<script type="text/javascript" src="/static/dist/jquery.jsonview.js"></script>
{% endblock %}



